#!/usr/bin/env bash

set -oue pipefail

source "$(dirname "$0")/utils.sh"

check_command nvim

nvim --headless -u "$HOME/.config/nvim/init.lua" -c "Lazy! sync" +qa

# lazygit's native theme depends on the autogenerated one
# provided by Lazyvim, so open lazygit in neovim headless mode
# to make sure it's generated
nvim --headless -u "$HOME/.config/nvim/init.lua" -c ":lua require('snacks.lazygit').open()" +qa

# TODO: install language providers
# python: activate venv and install requirements.txt in ~/.config/nvim
# perl: cpanm -n Neovim::Ext
#   - I am not, nor have never been a perl programmer, but `:checkhealth` within Neovim
#     complains about this, so there must be some reason to do this (nvim internals, plugins,
#     whatever..) -- doesn't really affect me but doesn't hurt to do
